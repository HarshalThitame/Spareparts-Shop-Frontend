<app-navbar></app-navbar>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-2">
      <app-admin-sidebar></app-admin-sidebar>
    </div>
    <div class="col-md-9">
      <div class="row">
        <div class="col-md-8">
          <div class="card mt-3">
            <div class="card-header bg">
              <h5>Order Details</h5>
            </div>
            <div class="card-body">
              <h6>Product Details:</h6>
              <div *ngFor="let item of order.orderItems">
                <div class="row">
                  <div class="col-md-8">
                    <h6>{{ item.product.name }}</h6>
                    <p><strong>Price:</strong> {{ item.price | currency : 'INR' }}</p>
                    <p><strong>Quantity:</strong> {{ item.quantity }}</p>
                    <p><strong>Subtotal:</strong> {{ item.subtotal | currency : 'INR' }}</p>
                    <p><strong>Discount:</strong> {{ item.discountAmount | currency : 'INR' }}</p>
                    <p><strong>Total Price:</strong> {{ item.totalPrice | currency : 'INR' }}</p>
                  </div>
                  <div class="col-md-4">
                    <img [src]="item.product.mainImage || NoImage" alt="{{ item.product.name }}"
                         class="img-fluid mb-2 item-img"/>
                  </div>
                </div>
                <hr/>
              </div>
              <h6>Order Summary:</h6>
              <p><strong>Total Items:</strong> {{ order.orderItems.length }}</p>
              <p><strong>Total Amount:</strong> {{ order.totalAmount | currency : 'INR' }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <!-- User Details Card -->
          <div class="card mt-3">
            <div class="card-header bg">
              <h5>User Details</h5>
            </div>
            <div class="card-body">

              <p><strong>Name:</strong> {{ order.user.firstName }} {{ order.user.lastName }}</p>
              <p><strong>Email:</strong> {{ order.user.email }}</p>
              <p><strong>Mobile:</strong> {{ order.user.mobile }}</p>
              <p><strong>Address:</strong> {{ order.user.address }}, {{ order.user.city }}, {{ order.user.state }}, {{ order.user.postalCode }}</p>
              <p><strong>Status:</strong> {{ order.user.isActive ? 'Active' : 'Inactive' }}</p>
            </div>
          </div>
          <!-- Additional Information Card -->
          <div class="card mt-3">
            <div class="card-header bg">
              <h5>Additional Information</h5>
            </div>
            <div class="card-body">
              <p>Delivery Address: demo</p>
              <p>Order Date: {{ order.createdAt | date:'dd-MMM-yyyy hh:mm a' }}</p>
              <p>Status: {{ order.status }}</p>
              <button class="btn btn-primary">Print Order</button>
            </div>
          </div>
        </div>
      </div>
      <a [routerLink]="'/admin/manage-orders/edit-order-details/'+order.id">Want to update order?</a>

<app-order-invoice [order]="order"></app-order-invoice>
    </div>
  </div>
</div>


